{% extends "layout.html" %}
{% block title %}Introduction to Minargon{% endblock %}

{% block body %}
{{ super() }}

{%endblock%}

{% block script %}
<h2>SBN Test PVs</h2>
<div id="pvTree"></div>

<!-- Grab depreciated glyphicons for bootstrap v4 -->
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap-only-glyphicons.css') }}" media="screen">

<script>

$(document).ready(function() {
    var pvTree = [{{data|tojson}}];
    
    // Generate the treeview
    $('#pvTree').treeview( {
        levels: 4,
        color: '#428bca',
        data: pvTree,
        enableLinks: true
    });

    $('#pvTree').on('nodeSelected', function(event, data) {
      if (data.ID === undefined) return;
      var link = $SCRIPT_ROOT + "/power_supply_single_stream/" + data.database + "/" + data.ID;
      window.location.href = link;
     });
});
</script>
{%endblock%}
