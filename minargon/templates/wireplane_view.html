{% extends "layout.html" %}
{% block title %}{{view_type}}{% endblock %}
{% block body %}
{{ super() }}
{% include 'metric_body.html' %}
{%endblock%}
{% block script %}
<script src="{{ url_for('static', filename='js/minargon/wireplane_view.js') }}" defer></script>
<script src="{{ url_for('static', filename='js/minargon/scatter_param.js') }}" defer></script>
<script defer>
// setup cubism
var context;
// global plots
var histogram;
var scatter;
// setup cubism options
var metric_info;
// setup our poll
var poll;
$(document).ready(function() {
    // setup histogram
    histogram = newHistogram($("#data-type").val(), Param(), {{detector|safe}}, "{{view_ind.plane}}", "histogram");
    // and the line chart
    scatter = newScatter($("#data-type").val(), Param(), {{detector|safe}}, "{{view_ind.plane}}", "scatter"); 

    // and cubism context
    context = create_cubism_context("#timeseries", $("#data-step").val());
    
    // setup metric options
    metric_info = new wireplane_metric_info({{detector|safe}}, "{{view_ind.plane}}", $SCRIPT_ROOT);

    // startup data
    updateData("#timeseries", context, Param(), $("#data-type").val(), metric_info, false, true);
});

function link_param() { return Param(); }

</script>
{% endblock %}
