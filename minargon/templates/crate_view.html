{% extends "layout.html" %}
{% block title %}{{view_type}}{% endblock %}
{% block head %}
{{ super() }}
  <script src="{{ url_for('static', filename='js/library/d3.js') }}"></script>
  <script src="{{ url_for('static', filename='js/library/cubism.v1.js') }}"></script>
{% endblock %}
{% block body %}
{{ super() }}
<div class="container">
<div class="row">
    <div class="col-md-8 vcenter" style="padding:0">
        <div id="histogram"></div>
    </div>
    <div class="col-md-4 vcenter">
        {% include 'data_options.html' %}
    </div>
</div>
<div class="row">
    <div class="col-md-8" style="padding:0" id="timeseries"></div>
    <div class="col-md-4 vcenter">
        {% include 'stream_options.html' %}
    </div>
</div>
</div>
{%endblock%}
{% block script %}
    <script src="{{ url_for('static', filename='js/library/d3.js') }}"></script>
    <script src="{{ url_for('static', filename='js/library/cubism.v1.js') }}"></script>
    <script src="{{ url_for('static', filename='js/moment/moment.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/moment/moment-timezone-with-data.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/minargon/Data.js') }}"></script>
    <script src="{{ url_for('static', filename='js/minargon/add-timeseries.js') }}"></script>
    <script src="{{ url_for('static', filename='js/minargon/detector.js') }}"></script>
    <script src="{{ url_for('static', filename='js/minargon/card_views.js') }}"></script>
    <script src="{{ url_for('static', filename='js/minargon/histogram.js') }}"></script>
{% include "card_views_script.html" %}
<script>

// setup cubism
var context;
// setup our poll
var poll;
$(document).ready(function() {
    // setup histogram
    histogram = newHistogram($("#data-type").val(), "{{view_type}}", {{detector|safe}}, "histogram");

    // and cubism context
    context = create_cubism_context("#timeseries", $("#data-step").val());
    
    // start polling for data
    newDaqData($("#data-type").val(), "{{view_type}}", {{view_ind|safe}}, {{detector|safe}}, false);
});

</script>
{% endblock %}
